<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Nail Collection">
    <meta name="description" content="Organize sua cole√ß√£o de esmaltes de forma pr√°tica e visual">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- √çcones para iOS -->
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="icons/icon-32x32.png">
    
    <title>Nail Collection - Gerenciador de Esmaltes</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        .app-container {
            max-width: 430px;
            margin: 0 auto;
            min-height: 100vh;
            background: #f8f9fa;
            position: relative;
            box-shadow: 0 0 40px rgba(0,0,0,0.2);
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .install-prompt {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 10px 15px;
            border-radius: 10px;
            margin-top: 10px;
            display: none;
            align-items: center;
            justify-content: space-between;
        }

        .install-prompt.show {
            display: flex;
        }

        .install-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        .tabs {
            display: flex;
            background: white;
            border-bottom: 1px solid #e0e0e0;
            position: sticky;
            top: 76px;
            z-index: 99;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 500;
            color: #666;
            border-bottom: 3px solid transparent;
            user-select: none;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: #f8f6ff;
        }

        .tab-content {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
            font-size: 14px;
        }

        input[type="text"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
            background: white;
            -webkit-appearance: none;
            appearance: none;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }

        .color-picker-wrapper {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .color-preview {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .color-preview:active {
            transform: scale(0.95);
        }

        input[type="color"] {
            opacity: 0;
            width: 0;
            height: 0;
            position: absolute;
            pointer-events: none;
        }

        /* Modal de Sele√ß√£o de Cores */
        .color-picker-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1001;
            align-items: flex-end;
            justify-content: center;
        }

        .color-picker-modal.active {
            display: flex;
        }

        .color-picker-content {
            background: white;
            width: 100%;
            max-width: 430px;
            border-radius: 20px 20px 0 0;
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        .color-picker-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .color-picker-header h3 {
            color: #333;
            font-size: 18px;
            margin: 0;
        }

        .color-picker-close {
            background: #f0f0f0;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-size: 18px;
            color: #666;
            cursor: pointer;
        }

        .preset-colors {
            margin-bottom: 20px;
        }

        .preset-colors-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .preset-colors-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .preset-color {
            aspect-ratio: 1;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border: 3px solid transparent;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .preset-color:active {
            transform: scale(0.9);
        }

        .preset-color.selected {
            border-color: #667eea;
            transform: scale(1.1);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .custom-color-section {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .color-sliders {
            margin-bottom: 15px;
        }

        .color-slider-group {
            margin-bottom: 15px;
        }

        .color-slider-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }

        .color-slider {
            width: 100%;
            height: 40px;
            -webkit-appearance: none;
            appearance: none;
            appearance: none;
            border-radius: 20px;
            outline: none;
            cursor: pointer;
        }

        .color-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        .color-slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        .color-slider.hue {
            background: linear-gradient(to right, 
                hsl(0, 100%, 50%), 
                hsl(60, 100%, 50%), 
                hsl(120, 100%, 50%), 
                hsl(180, 100%, 50%), 
                hsl(240, 100%, 50%), 
                hsl(300, 100%, 50%), 
                hsl(360, 100%, 50%));
        }

        .color-slider.saturation {
            background: linear-gradient(to right, 
                hsl(var(--hue), 0%, var(--lightness)), 
                hsl(var(--hue), 100%, var(--lightness)));
        }

        .color-slider.lightness {
            background: linear-gradient(to right, 
                hsl(var(--hue), var(--saturation), 0%), 
                hsl(var(--hue), var(--saturation), 50%), 
                hsl(var(--hue), var(--saturation), 100%));
        }

        .hex-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .hex-input {
            flex: 1;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: monospace;
            font-size: 14px;
            text-transform: uppercase;
        }

        .selected-color-preview {
            width: 100%;
            height: 60px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }

        .confirm-color-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .image-upload {
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: #f8f6ff;
        }

        .image-upload:active {
            transform: scale(0.98);
        }

        .image-upload input[type="file"] {
            display: none;
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .polish-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }

        .polish-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
            cursor: pointer;
        }

        .polish-card:active {
            transform: scale(0.95);
        }

        .polish-card-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
        }

        .polish-card-body {
            padding: 12px;
        }

        .polish-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .polish-brand {
            color: #888;
            font-size: 12px;
            margin-bottom: 8px;
        }

        .polish-color {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid #e0e0e0;
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }

        .polish-validity {
            font-size: 11px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 8px;
        }

        .filter-section {
            margin-bottom: 20px;
        }

        .search-bar {
            position: relative;
        }

        .search-bar input {
            padding-left: 40px;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #888;
        }

        .color-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .color-filter {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .color-filter.active {
            border-color: #667eea;
            transform: scale(1.2);
        }

        .color-filter.all {
            background: linear-gradient(45deg, 
                #ff0000 0%, #ff7f00 14%, 
                #ffff00 28%, #00ff00 42%, 
                #0000ff 56%, #4b0082 70%, 
                #9400d3 84%, #ff1493 100%);
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #888;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            width: 100%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 20px;
            padding: 25px;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            margin-bottom: 20px;
        }

        .modal-header h2 {
            color: #333;
            font-size: 20px;
        }

        .close-modal {
            float: right;
            font-size: 24px;
            color: #888;
            cursor: pointer;
            background: none;
            border: none;
        }

        .nail-art-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
        }

        .nail-art-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 10px;
        }

        .nail-art-thumb {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 8px;
            background: #f0f0f0;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #666;
            box-shadow: none;
            margin-top: 10px;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff5252 100%);
            margin-top: 10px;
        }

        .stats-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #f8f6ff 0%, #ede9ff 100%);
            border-radius: 10px;
        }

        .stat-number {
            font-size: 28px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
        }

        .offline-indicator {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 12px;
            display: none;
            z-index: 2000;
        }

        .offline-indicator.show {
            display: block;
        }

        /* PWA espec√≠fico */
        @media (display-mode: standalone) {
            .app-container {
                max-width: 100%;
                box-shadow: none;
            }
        }

        /* iOS safe areas */
        @supports (padding: max(0px)) {
            .header {
                padding-top: max(20px, env(safe-area-inset-top));
            }
            
            .tab-content {
                padding-bottom: max(20px, env(safe-area-inset-bottom));
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>üíÖ Nail Collection</h1>
            <p>Organize sua cole√ß√£o de esmaltes</p>
            <div id="installPrompt" class="install-prompt">
                <span style="font-size: 12px;">Instalar app</span>
                <button class="install-btn" onclick="installApp()">Instalar</button>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('home')">üè† In√≠cio</div>
            <div class="tab" onclick="switchTab('add')">‚ûï Adicionar</div>
            <div class="tab" onclick="switchTab('collection')">üíé Cole√ß√£o</div>
        </div>

        <!-- Tab In√≠cio -->
        <div id="home" class="tab-content active">
            <div class="stats-card">
                <h3 style="margin-bottom: 15px; color: #333;">üìä Estat√≠sticas</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="totalPolishes">0</div>
                        <div class="stat-label">Total de Esmaltes</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalBrands">0</div>
                        <div class="stat-label">Marcas</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="expiringSoon">0</div>
                        <div class="stat-label">Vencendo em Breve</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalNailArts">0</div>
                        <div class="stat-label">Nail Arts</div>
                    </div>
                </div>
            </div>

            <h3 style="margin-bottom: 15px; color: #333;">‚ú® √öltimos Adicionados</h3>
            <div id="recentPolishes" class="polish-grid">
                <div class="empty-state">
                    <div class="empty-state-icon">üíÖ</div>
                    <p>Nenhum esmalte adicionado ainda</p>
                    <p style="font-size: 12px; margin-top: 10px;">Comece adicionando seu primeiro esmalte!</p>
                </div>
            </div>
        </div>

        <!-- Tab Adicionar -->
        <div id="add" class="tab-content">
            <form id="polishForm">
                <div class="form-group">
                    <label for="name">Nome do Esmalte *</label>
                    <input type="text" id="name" placeholder="Ex: Renda Portuguesa" required>
                </div>

                <div class="form-group">
                    <label for="brand">Marca *</label>
                    <input type="text" id="brand" placeholder="Ex: Risqu√©, Colorama, Impala" required>
                </div>

                <div class="form-group">
                    <label for="color">Cor Principal *</label>
                    <div class="color-picker-wrapper">
                        <div class="color-preview" id="colorPreview" onclick="openColorPicker()"></div>
                        <input type="color" id="colorPicker" value="#ff69b4">
                        <input type="text" id="colorName" placeholder="Nome da cor (ex: Rosa Pink)" style="flex: 1;">
                    </div>
                </div>

                <div class="form-group">
                    <label for="category">Categoria</label>
                    <select id="category">
                        <option value="">Selecione uma categoria</option>
                        <option value="cremoso">Cremoso</option>
                        <option value="perolado">Perolado</option>
                        <option value="glitter">Glitter</option>
                        <option value="metalico">Met√°lico</option>
                        <option value="fosco">Fosco</option>
                        <option value="neon">Neon</option>
                        <option value="holografico">Hologr√°fico</option>
                        <option value="jelly">Jelly</option>
                        <option value="termico">T√©rmico</option>
                        <option value="natural">Natural</option>
                        <option value="transparente">Transparente</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="validity">Data de Validade</label>
                    <input type="date" id="validity">
                </div>

                <div class="form-group">
                    <label for="notes">Observa√ß√µes</label>
                    <textarea id="notes" placeholder="Ex: Cobertura √≥tima com 2 camadas, seca r√°pido..."></textarea>
                </div>

                <div class="form-group">
                    <label>Foto do Esmalte</label>
                    <div class="image-upload" onclick="document.getElementById('polishImage').click()">
                        <input type="file" id="polishImage" accept="image/*" capture="environment">
                        <div id="polishImagePreview">
                            <span style="font-size: 32px;">üì∏</span>
                            <p style="margin-top: 10px;">Clique para adicionar foto</p>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn">üíÖ Adicionar √† Cole√ß√£o</button>
            </form>
        </div>

        <!-- Tab Cole√ß√£o -->
        <div id="collection" class="tab-content">
            <div class="filter-section">
                <div class="search-bar">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchInput" placeholder="Buscar esmalte..." onkeyup="filterPolishes()">
                </div>
                
                <div class="color-filters">
                    <div class="color-filter all active" onclick="filterByColor('all')" title="Todas as cores"></div>
                    <div class="color-filter" style="background: #ff0000" onclick="filterByColor('#ff0000')" title="Vermelho"></div>
                    <div class="color-filter" style="background: #ff69b4" onclick="filterByColor('#ff69b4')" title="Rosa"></div>
                    <div class="color-filter" style="background: #ff8c00" onclick="filterByColor('#ff8c00')" title="Laranja"></div>
                    <div class="color-filter" style="background: #ffff00" onclick="filterByColor('#ffff00')" title="Amarelo"></div>
                    <div class="color-filter" style="background: #00ff00" onclick="filterByColor('#00ff00')" title="Verde"></div>
                    <div class="color-filter" style="background: #00ffff" onclick="filterByColor('#00ffff')" title="Azul Claro"></div>
                    <div class="color-filter" style="background: #0000ff" onclick="filterByColor('#0000ff')" title="Azul"></div>
                    <div class="color-filter" style="background: #800080" onclick="filterByColor('#800080')" title="Roxo"></div>
                    <div class="color-filter" style="background: #000000" onclick="filterByColor('#000000')" title="Preto"></div>
                    <div class="color-filter" style="background: #ffffff; border: 2px solid #e0e0e0;" onclick="filterByColor('#ffffff')" title="Branco"></div>
                </div>
            </div>

            <div id="polishGrid" class="polish-grid">
                <div class="empty-state">
                    <div class="empty-state-icon">üé®</div>
                    <p>Sua cole√ß√£o est√° vazia</p>
                    <p style="font-size: 12px; margin-top: 10px;">Adicione esmaltes na aba "Adicionar"</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-modal" onclick="closeModal()">&times;</button>
                <h2 id="modalTitle">Detalhes do Esmalte</h2>
            </div>
            <div id="modalBody">
                <!-- Conte√∫do din√¢mico -->
            </div>
        </div>
    </div>

    <!-- Modal de Sele√ß√£o de Cor -->
    <div id="colorPickerModal" class="color-picker-modal">
        <div class="color-picker-content">
            <div class="color-picker-header">
                <h3>Escolha uma Cor</h3>
                <button class="color-picker-close" onclick="closeColorPicker()">&times;</button>
            </div>
            
            <div class="selected-color-preview" id="selectedColorPreview">
                #FF69B4
            </div>
            
            <!-- Cores Favoritas -->
            <div class="preset-colors" id="favoriteColorsSection" style="display: none;">
                <div class="preset-colors-label" style="display: flex; justify-content: space-between; align-items: center;">
                    <span>üíñ Cores Favoritas</span>
                    <button type="button" onclick="clearFavoriteColors()" style="background: none; border: none; color: #666; font-size: 12px; cursor: pointer;">Limpar</button>
                </div>
                <div class="preset-colors-grid" id="favoriteColors">
                    <!-- Cores favoritas -->
                </div>
            </div>
            
            <!-- Cores Recentes -->
            <div class="preset-colors" id="recentColorsSection" style="display: none;">
                <div class="preset-colors-label" style="display: flex; justify-content: space-between; align-items: center;">
                    <span>üïí Cores Recentes</span>
                    <button type="button" onclick="clearRecentColors()" style="background: none; border: none; color: #666; font-size: 12px; cursor: pointer;">Limpar</button>
                </div>
                <div class="preset-colors-grid" id="recentColors">
                    <!-- Cores recentes -->
                </div>
            </div>
            
            <!-- Paletas Tem√°ticas -->
            <div class="preset-colors">
                <div class="preset-colors-label" style="display: flex; justify-content: space-between; align-items: center;">
                    <span>üé® Paletas Tem√°ticas</span>
                    <select id="themeSelector" onchange="loadThemePalette()" style="background: white; border: 1px solid #e0e0e0; border-radius: 5px; padding: 5px; font-size: 12px;">
                        <option value="">Escolha um tema</option>
                        <option value="verao">üåû Ver√£o</option>
                        <option value="inverno">‚ùÑÔ∏è Inverno</option>
                        <option value="primavera">üå∏ Primavera</option>
                        <option value="outono">üçÇ Outono</option>
                        <option value="neon">‚ö° Neon</option>
                        <option value="pastel">üåà Pastel</option>
                        <option value="metalico">‚ú® Met√°lico</option>
                        <option value="nude">ü§ç Nude</option>
                        <option value="gotico">üîÆ G√≥tico</option>
                        <option value="vintage">üíÑ Vintage</option>
                    </select>
                </div>
                <div class="preset-colors-grid" id="themePalette" style="display: none;">
                    <!-- Paleta tem√°tica -->
                </div>
            </div>
            
            <div class="preset-colors">
                <div class="preset-colors-label">Cores Populares para Esmaltes</div>
                <div class="preset-colors-grid" id="presetColors">
                    <!-- Cores ser√£o adicionadas via JavaScript -->
                </div>
            </div>
            
            <div class="custom-color-section">
                <div class="preset-colors-label">Personalizar Cor</div>
                <div class="color-sliders">
                    <div class="color-slider-group">
                        <div class="color-slider-label">
                            <span>Matiz</span>
                            <span id="hueValue">0</span>
                        </div>
                        <input type="range" class="color-slider hue" id="hueSlider" min="0" max="360" value="330">
                    </div>
                    
                    <div class="color-slider-group">
                        <div class="color-slider-label">
                            <span>Satura√ß√£o</span>
                            <span id="saturationValue">100%</span>
                        </div>
                        <input type="range" class="color-slider saturation" id="saturationSlider" min="0" max="100" value="100">
                    </div>
                    
                    <div class="color-slider-group">
                        <div class="color-slider-label">
                            <span>Luminosidade</span>
                            <span id="lightnessValue">50%</span>
                        </div>
                        <input type="range" class="color-slider lightness" id="lightnessSlider" min="0" max="100" value="70">
                    </div>
                </div>
                
                <div class="hex-input-group">
                    <input type="text" class="hex-input" id="hexInput" placeholder="#FF69B4" maxlength="7">
                </div>
            </div>
            
            <div style="display: flex; gap: 8px; margin-bottom: 15px;">
                <button type="button" onclick="addToFavorites()" style="flex: 1; padding: 8px; background: #ff69b4; color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer;">
                    üíñ Favoritar
                </button>
                <button type="button" onclick="generatePalette()" style="flex: 1; padding: 8px; background: #667eea; color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer;">
                    üé® Paleta
                </button>
                <button type="button" onclick="suggestCombinations()" style="flex: 1; padding: 8px; background: #4ECDC4; color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer;">
                    ‚ú® Sugest√µes
                </button>
            </div>
            
            <button class="confirm-color-btn" onclick="confirmColor()">Confirmar Cor</button>
        </div>
    </div>

    <!-- Indicador Offline -->
    <div id="offlineIndicator" class="offline-indicator">
        üìµ Modo Offline
    </div>

    <script>
        // Estado da aplica√ß√£o
        let polishes = JSON.parse(localStorage.getItem('polishes') || '[]');
        let nailArts = JSON.parse(localStorage.getItem('nailArts') || '{}');
        let currentFilter = 'all';
        let currentPolishId = null;
        let deferredPrompt;
        let selectedColor = '#ff69b4';
        let favoriteColors = JSON.parse(localStorage.getItem('favoriteColors') || '[]');
        let recentColors = JSON.parse(localStorage.getItem('recentColors') || '[]');
        
        // Paletas tem√°ticas
        const themePalettes = {
            verao: {
                name: 'Ver√£o',
                colors: [
                    { hex: '#FF6B35', name: 'Coral Vibrante' },
                    { hex: '#F7931E', name: 'Laranja Solar' },
                    { hex: '#FFD23F', name: 'Amarelo Tropical' },
                    { hex: '#06FFA5', name: 'Verde √Ågua' },
                    { hex: '#4ECDC4', name: 'Turquesa' },
                    { hex: '#45B7D1', name: 'Azul Piscina' },
                    { hex: '#96CEB4', name: 'Menta' },
                    { hex: '#FECA57', name: 'Manga' },
                    { hex: '#FF9FF3', name: 'Rosa Tropical' },
                    { hex: '#54A0FF', name: 'C√©u de Ver√£o' },
                    { hex: '#5F27CD', name: 'Roxo Vibrante' },
                    { hex: '#00D2D3', name: 'Azul Caribe' }
                ]
            },
            inverno: {
                name: 'Inverno',
                colors: [
                    { hex: '#2C3E50', name: 'Azul Meia-Noite' },
                    { hex: '#34495E', name: 'Cinza Tempestade' },
                    { hex: '#8E44AD', name: 'Roxo Imperial' },
                    { hex: '#2980B9', name: 'Azul Profundo' },
                    { hex: '#16A085', name: 'Verde Esmeralda' },
                    { hex: '#D35400', name: 'Laranja Queimado' },
                    { hex: '#C0392B', name: 'Vermelho Borgonha' },
                    { hex: '#7F8C8D', name: 'Prata Fosco' },
                    { hex: '#1ABC9C', name: 'Verde √Ågua Escuro' },
                    { hex: '#9B59B6', name: 'Ametista' },
                    { hex: '#E74C3C', name: 'Vermelho Invernal' },
                    { hex: '#3498DB', name: 'Azul Gelo' }
                ]
            },
            primavera: {
                name: 'Primavera', 
                colors: [
                    { hex: '#FFB3BA', name: 'Rosa Cerejeira' },
                    { hex: '#FFDFBA', name: 'P√™ssego Suave' },
                    { hex: '#FFFFBA', name: 'Amarelo Claro' },
                    { hex: '#BAFFC9', name: 'Verde Novo' },
                    { hex: '#BAE1FF', name: 'Azul Beb√™' },
                    { hex: '#FFE5CC', name: 'Coral Claro' },
                    { hex: '#D4A5A5', name: 'Rosa Antigo' },
                    { hex: '#A8E6CF', name: 'Verde Menta' },
                    { hex: '#C7CEEA', name: 'Lil√°s Claro' },
                    { hex: '#FFC3A0', name: 'Salm√£o' },
                    { hex: '#FF677D', name: 'Rosa Vibrante' },
                    { hex: '#D6A2E8', name: 'Lav√™nda' }
                ]
            },
            outono: {
                name: 'Outono',
                colors: [
                    { hex: '#D2691E', name: 'Canela' },
                    { hex: '#CD853F', name: 'Dourado Outonal' },
                    { hex: '#A0522D', name: 'Marrom Terra' },
                    { hex: '#8B4513', name: 'Castanho' },
                    { hex: '#B22222', name: 'Vermelho Folha' },
                    { hex: '#DAA520', name: 'Dourado' },
                    { hex: '#FF8C00', name: 'Laranja Queimado' },
                    { hex: '#DC143C', name: 'Vermelho Carmes√≠m' },
                    { hex: '#696969', name: 'Cinza Chumbo' },
                    { hex: '#800000', name: 'Vinho Tinto' },
                    { hex: '#556B2F', name: 'Verde Oliva' },
                    { hex: '#8FBC8F', name: 'Verde Musgo' }
                ]
            },
            neon: {
                name: 'Neon',
                colors: [
                    { hex: '#FF0080', name: 'Pink Neon' },
                    { hex: '#00FF80', name: 'Verde Neon' },
                    { hex: '#8000FF', name: 'Roxo Neon' },
                    { hex: '#FF8000', name: 'Laranja Neon' },
                    { hex: '#0080FF', name: 'Azul Neon' },
                    { hex: '#FFFF00', name: 'Amarelo Neon' },
                    { hex: '#FF0040', name: 'Rosa Choque' },
                    { hex: '#40FF00', name: 'Verde Lima' },
                    { hex: '#4000FF', name: 'Azul El√©trico' },
                    { hex: '#FF4000', name: 'Vermelho Neon' },
                    { hex: '#00FFFF', name: 'Ciano Neon' },
                    { hex: '#FF00FF', name: 'Magenta Neon' }
                ]
            },
            pastel: {
                name: 'Pastel',
                colors: [
                    { hex: '#FFD6E8', name: 'Rosa Pastel' },
                    { hex: '#E8D5FF', name: 'Lil√°s Pastel' },
                    { hex: '#D5E8FF', name: 'Azul Pastel' },
                    { hex: '#D5FFE8', name: 'Verde Pastel' },
                    { hex: '#FFE8D5', name: 'P√™ssego Pastel' },
                    { hex: '#FFFFD5', name: 'Amarelo Pastel' },
                    { hex: '#F0E8FF', name: 'Lav√™nda Pastel' },
                    { hex: '#E8FFD5', name: 'Menta Pastel' },
                    { hex: '#FFE8F0', name: 'Rosa Beb√™' },
                    { hex: '#D5F0FF', name: 'Azul Beb√™' },
                    { hex: '#F0D5FF', name: 'Roxo Beb√™' },
                    { hex: '#FFF0D5', name: 'Creme Pastel' }
                ]
            },
            metalico: {
                name: 'Met√°lico',
                colors: [
                    { hex: '#C0C0C0', name: 'Prata' },
                    { hex: '#FFD700', name: 'Dourado' },
                    { hex: '#B87333', name: 'Bronze' },
                    { hex: '#CD7F32', name: 'Cobre' },
                    { hex: '#E5E4E2', name: 'Platina' },
                    { hex: '#918151', name: 'Ouro Velho' },
                    { hex: '#36454F', name: 'Grafite' },
                    { hex: '#4A4A4A', name: 'Antracite' },
                    { hex: '#B2BEB5', name: 'Prata Fosca' },
                    { hex: '#FFEAA7', name: 'Champagne' },
                    { hex: '#6C5B7B', name: 'Roxo Met√°lico' },
                    { hex: '#2E8B57', name: 'Verde Met√°lico' }
                ]
            },
            nude: {
                name: 'Nude',
                colors: [
                    { hex: '#F5DEB3', name: 'Nude Claro' },
                    { hex: '#DEB887', name: 'Bege Rosado' },
                    { hex: '#D2B48C', name: 'Areia' },
                    { hex: '#BC9A6A', name: 'Caramelo' },
                    { hex: '#A0826D', name: 'Nude Escuro' },
                    { hex: '#F4E4BC', name: 'Vanilla' },
                    { hex: '#E6D3A3', name: 'Champagne Nude' },
                    { hex: '#C7B377', name: 'Dourado Nude' },
                    { hex: '#B8860B', name: 'Ouro Nude' },
                    { hex: '#DAA520', name: 'Mel' },
                    { hex: '#F0E68C', name: 'Nude Amarelado' },
                    { hex: '#E5B887', name: 'Nude Rosado' }
                ]
            },
            gotico: {
                name: 'G√≥tico',
                colors: [
                    { hex: '#000000', name: 'Preto Total' },
                    { hex: '#8B0000', name: 'Vermelho Sangue' },
                    { hex: '#800080', name: 'Roxo Profundo' },
                    { hex: '#2F4F4F', name: 'Cinza Escuro' },
                    { hex: '#4B0082', name: '√çndigo' },
                    { hex: '#800000', name: 'Marrom Escuro' },
                    { hex: '#483D8B', name: 'Azul Escuro' },
                    { hex: '#2E8B57', name: 'Verde Escuro' },
                    { hex: '#8B008B', name: 'Magenta Escuro' },
                    { hex: '#556B2F', name: 'Verde Oliva' },
                    { hex: '#708090', name: 'Cinza Met√°lico' },
                    { hex: '#654321', name: 'Marrom Terra' }
                ]
            },
            vintage: {
                name: 'Vintage',
                colors: [
                    { hex: '#B22222', name: 'Vermelho Vintage' },
                    { hex: '#8B4513', name: 'Marrom Vintage' },
                    { hex: '#2F4F4F', name: 'Verde Vintage' },
                    { hex: '#4682B4', name: 'Azul Vintage' },
                    { hex: '#D2691E', name: 'Laranja Vintage' },
                    { hex: '#9932CC', name: 'Roxo Vintage' },
                    { hex: '#CD853F', name: 'Dourado Vintage' },
                    { hex: '#A0522D', name: 'Siena Vintage' },
                    { hex: '#708090', name: 'Cinza Vintage' },
                    { hex: '#8FBC8F', name: 'Verde Vintage' },
                    { hex: '#DA70D6', name: 'Rosa Vintage' },
                    { hex: '#F0E68C', name: 'Creme Vintage' }
                ]
            }
        };

        // Cores populares para esmaltes
        const popularColors = [
            { hex: '#FF0000', name: 'Vermelho' },
            { hex: '#8B0000', name: 'Vinho' },
            { hex: '#FF69B4', name: 'Rosa' },
            { hex: '#FFB6C1', name: 'Rosa Claro' },
            { hex: '#FF1493', name: 'Pink' },
            { hex: '#FF6347', name: 'Coral' },
            { hex: '#FF4500', name: 'Laranja' },
            { hex: '#FFD700', name: 'Dourado' },
            { hex: '#FFFF00', name: 'Amarelo' },
            { hex: '#98FB98', name: 'Verde Claro' },
            { hex: '#00FF00', name: 'Verde' },
            { hex: '#008000', name: 'Verde Escuro' },
            { hex: '#40E0D0', name: 'Turquesa' },
            { hex: '#00CED1', name: 'Azul Turquesa' },
            { hex: '#87CEEB', name: 'Azul C√©u' },
            { hex: '#0000FF', name: 'Azul' },
            { hex: '#000080', name: 'Azul Marinho' },
            { hex: '#4B0082', name: '√çndigo' },
            { hex: '#800080', name: 'Roxo' },
            { hex: '#DA70D6', name: 'Orqu√≠dea' },
            { hex: '#DDA0DD', name: 'Lil√°s' },
            { hex: '#FFFFFF', name: 'Branco' },
            { hex: '#000000', name: 'Preto' },
            { hex: '#808080', name: 'Cinza' },
            { hex: '#C0C0C0', name: 'Prata' },
            { hex: '#F5DEB3', name: 'Nude' },
            { hex: '#DEB887', name: 'Bege' },
            { hex: '#A52A2A', name: 'Marrom' },
            { hex: '#D2691E', name: 'Chocolate' },
            { hex: '#F0E68C', name: 'Amarelo Pastel' }
        ];

        // Inicializar seletor de cores
        function initColorPicker() {
            loadFavoriteColors();
            loadRecentColors();
            
            const container = document.getElementById('presetColors');
            container.innerHTML = popularColors.map(color => `
                <div class="preset-color" 
                     style="background: ${color.hex}; ${color.hex === '#FFFFFF' ? 'border: 2px solid #e0e0e0;' : ''}" 
                     onclick="selectPresetColor('${color.hex}', '${color.name}')"
                     title="${color.name}">
                </div>
            `).join('');

            // Configurar sliders
            document.getElementById('hueSlider').addEventListener('input', updateFromSliders);
            document.getElementById('saturationSlider').addEventListener('input', updateFromSliders);
            document.getElementById('lightnessSlider').addEventListener('input', updateFromSliders);
            document.getElementById('hexInput').addEventListener('input', updateFromHex);

            // Atualizar CSS variables para gradientes dos sliders
            updateSliderGradients();
        }

        // Abrir seletor de cores
        function openColorPicker() {
            document.getElementById('colorPickerModal').classList.add('active');
            updateColorDisplay(selectedColor);
            initColorPicker();
            
            // Prevenir scroll do body
            document.body.style.overflow = 'hidden';
        }

        // Fechar seletor de cores
        function closeColorPicker() {
            document.getElementById('colorPickerModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Selecionar cor predefinida
        function selectPresetColor(hex, name) {
            selectedColor = hex;
            document.getElementById('colorName').value = name;
            updateColorDisplay(hex);
            
            // Adicionar √† lista de cores recentes
            addToRecentColors(hex, name);
            
            // Marcar como selecionada
            document.querySelectorAll('.preset-color').forEach(el => {
                el.classList.remove('selected');
                if (el.style.background.includes(hex.toLowerCase()) || 
                    el.style.background.includes(hex.toUpperCase())) {
                    el.classList.add('selected');
                }
            });

            // Atualizar sliders
            const hsl = hexToHSL(hex);
            document.getElementById('hueSlider').value = hsl.h;
            document.getElementById('saturationSlider').value = hsl.s;
            document.getElementById('lightnessSlider').value = hsl.l;
            updateSliderGradients();
        }

        // Atualizar cor dos sliders
        function updateFromSliders() {
            const h = document.getElementById('hueSlider').value;
            const s = document.getElementById('saturationSlider').value;
            const l = document.getElementById('lightnessSlider').value;
            
            document.getElementById('hueValue').textContent = h + '¬∞';
            document.getElementById('saturationValue').textContent = s + '%';
            document.getElementById('lightnessValue').textContent = l + '%';
            
            const hex = hslToHex(h, s, l);
            selectedColor = hex;
            updateColorDisplay(hex);
            updateSliderGradients();
            
            // Limpar nome da cor quando personalizada
            document.getElementById('colorName').value = '';
        }

        // Atualizar gradientes dos sliders
        function updateSliderGradients() {
            const h = document.getElementById('hueSlider').value;
            const s = document.getElementById('saturationSlider').value;
            const l = document.getElementById('lightnessSlider').value;
            
            document.documentElement.style.setProperty('--hue', h + 'deg');
            document.documentElement.style.setProperty('--saturation', s + '%');
            document.documentElement.style.setProperty('--lightness', l + '%');
            
            // Atualizar gradiente de satura√ß√£o
            document.getElementById('saturationSlider').style.background = 
                `linear-gradient(to right, hsl(${h}, 0%, ${l}%), hsl(${h}, 100%, ${l}%))`;
            
            // Atualizar gradiente de luminosidade
            document.getElementById('lightnessSlider').style.background = 
                `linear-gradient(to right, hsl(${h}, ${s}%, 0%), hsl(${h}, ${s}%, 50%), hsl(${h}, ${s}%, 100%))`;
        }

        // Atualizar cor do input hexadecimal
        function updateFromHex() {
            let hex = document.getElementById('hexInput').value;
            if (!hex.startsWith('#')) hex = '#' + hex;
            
            if (/^#[0-9A-F]{6}$/i.test(hex)) {
                selectedColor = hex;
                updateColorDisplay(hex);
                
                const hsl = hexToHSL(hex);
                document.getElementById('hueSlider').value = hsl.h;
                document.getElementById('saturationSlider').value = hsl.s;
                document.getElementById('lightnessSlider').value = hsl.l;
                updateSliderGradients();
            }
        }

        // Atualizar display de cor
        function updateColorDisplay(hex) {
            document.getElementById('selectedColorPreview').style.background = hex;
            document.getElementById('selectedColorPreview').textContent = hex.toUpperCase();
            document.getElementById('hexInput').value = hex.toUpperCase();
            
            // Ajustar cor do texto baseado na luminosidade
            const rgb = hexToRgb(hex);
            const brightness = (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;
            document.getElementById('selectedColorPreview').style.color = brightness > 128 ? '#000' : '#fff';
        }

        // Confirmar sele√ß√£o de cor
        function confirmColor() {
            document.getElementById('colorPicker').value = selectedColor;
            document.getElementById('colorPreview').style.background = selectedColor;
            
            // Adicionar √† lista de cores recentes
            const colorName = document.getElementById('colorName').value || getColorName(selectedColor);
            addToRecentColors(selectedColor, colorName);
            
            closeColorPicker();
        }

        // Convers√µes de cor
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function hexToHSL(hex) {
            const rgb = hexToRgb(hex);
            const r = rgb.r / 255;
            const g = rgb.g / 255;
            const b = rgb.b / 255;
            
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            
            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                
                switch (max) {
                    case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
                    case g: h = ((b - r) / d + 2) / 6; break;
                    case b: h = ((r - g) / d + 4) / 6; break;
                }
            }
            
            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }

        function hslToHex(h, s, l) {
            h = h / 360;
            s = s / 100;
            l = l / 100;
            
            let r, g, b;
            
            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            
            const toHex = x => {
                const hex = Math.round(x * 255).toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            };
            
            return '#' + toHex(r) + toHex(g) + toHex(b);
        }
        
        // Fun√ß√µes para cores favoritas e recentes
        function loadFavoriteColors() {
            const container = document.getElementById('favoriteColors');
            const section = document.getElementById('favoriteColorsSection');
            
            if (favoriteColors.length === 0) {
                section.style.display = 'none';
                return;
            }
            
            section.style.display = 'block';
            container.innerHTML = favoriteColors.map(color => `
                <div class="preset-color" 
                     style="background: ${color.hex}; ${color.hex === '#FFFFFF' ? 'border: 2px solid #e0e0e0;' : ''}" 
                     onclick="selectPresetColor('${color.hex}', '${color.name}')"
                     title="${color.name}">
                </div>
            `).join('');
        }
        
        function loadRecentColors() {
            const container = document.getElementById('recentColors');
            const section = document.getElementById('recentColorsSection');
            
            if (recentColors.length === 0) {
                section.style.display = 'none';
                return;
            }
            
            section.style.display = 'block';
            container.innerHTML = recentColors.map(color => `
                <div class="preset-color" 
                     style="background: ${color.hex}; ${color.hex === '#FFFFFF' ? 'border: 2px solid #e0e0e0;' : ''}" 
                     onclick="selectPresetColor('${color.hex}', '${color.name}')"
                     title="${color.name}">
                </div>
            `).join('');
        }
        
        function addToRecentColors(hex, name) {
            // Remover cor se j√° existe
            recentColors = recentColors.filter(color => color.hex.toLowerCase() !== hex.toLowerCase());
            
            // Adicionar no in√≠cio
            recentColors.unshift({ hex, name });
            
            // Limitar a 12 cores recentes
            recentColors = recentColors.slice(0, 12);
            
            localStorage.setItem('recentColors', JSON.stringify(recentColors));
            loadRecentColors();
        }
        
        function addToFavorites() {
            const colorName = document.getElementById('colorName').value || getColorName(selectedColor);
            
            // Verificar se j√° √© favorita
            if (favoriteColors.some(color => color.hex.toLowerCase() === selectedColor.toLowerCase())) {
                showNotification('Cor j√° √© favorita! üíñ');
                return;
            }
            
            favoriteColors.push({ hex: selectedColor, name: colorName });
            localStorage.setItem('favoriteColors', JSON.stringify(favoriteColors));
            loadFavoriteColors();
            showNotification('Cor adicionada aos favoritos! üíñ');
        }
        
        function clearFavoriteColors() {
            if (confirm('Limpar todas as cores favoritas?')) {
                favoriteColors = [];
                localStorage.setItem('favoriteColors', JSON.stringify(favoriteColors));
                loadFavoriteColors();
                showNotification('Cores favoritas limpas');
            }
        }
        
        function clearRecentColors() {
            if (confirm('Limpar todas as cores recentes?')) {
                recentColors = [];
                localStorage.setItem('recentColors', JSON.stringify(recentColors));
                loadRecentColors();
                showNotification('Cores recentes limpas');
            }
        }
        
        function getColorName(hex) {
            const color = popularColors.find(c => c.hex.toLowerCase() === hex.toLowerCase());
            return color ? color.name : hex;
        }
        
        // Gerar paleta de cores harmoniosas
        function generatePalette() {
            const hsl = hexToHSL(selectedColor);
            const palette = [];
            
            // Cores complementares e an√°logas
            const variations = [
                { h: hsl.h, s: Math.max(hsl.s - 20, 0), l: Math.min(hsl.l + 20, 100), name: 'Mais Clara' },
                { h: hsl.h, s: Math.min(hsl.s + 20, 100), l: Math.max(hsl.l - 20, 0), name: 'Mais Escura' },
                { h: (hsl.h + 30) % 360, s: hsl.s, l: hsl.l, name: 'An√°loga +30¬∞' },
                { h: (hsl.h - 30 + 360) % 360, s: hsl.s, l: hsl.l, name: 'An√°loga -30¬∞' },
                { h: (hsl.h + 180) % 360, s: hsl.s, l: hsl.l, name: 'Complementar' },
                { h: (hsl.h + 150) % 360, s: hsl.s, l: hsl.l, name: 'Tri√°dica 1' },
                { h: (hsl.h + 210) % 360, s: hsl.s, l: hsl.l, name: 'Tri√°dica 2' }
            ];
            
            // Mostrar paleta
            const paletteHtml = `
                <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <div style="font-weight: 600; margin-bottom: 10px; color: #333;">üé® Paleta Harmoniosa</div>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                        ${variations.map(color => {
                            const hex = hslToHex(color.h, color.s, color.l);
                            return `
                                <div style="text-align: center;">
                                    <div class="preset-color" 
                                         style="background: ${hex}; width: 100%; height: 40px; margin-bottom: 5px;" 
                                         onclick="selectPresetColor('${hex}', '${color.name}')"
                                         title="${color.name}">
                                    </div>
                                    <div style="font-size: 10px; color: #666;">${color.name}</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
            
            // Inserir ap√≥s a se√ß√£o de cores personalizadas
            const customSection = document.querySelector('.custom-color-section');
            const existingPalette = document.getElementById('generatedPalette');
            if (existingPalette) {
                existingPalette.remove();
            }
            
            const paletteDiv = document.createElement('div');
            paletteDiv.id = 'generatedPalette';
            paletteDiv.innerHTML = paletteHtml;
            customSection.parentNode.insertBefore(paletteDiv, customSection.nextSibling);
        }
        
        // Carregar paleta tem√°tica
        function loadThemePalette() {
            const theme = document.getElementById('themeSelector').value;
            const container = document.getElementById('themePalette');
            
            if (!theme || !themePalettes[theme]) {
                container.style.display = 'none';
                return;
            }
            
            const palette = themePalettes[theme];
            container.style.display = 'grid';
            container.innerHTML = palette.colors.map(color => `
                <div class="preset-color" 
                     style="background: ${color.hex}; ${color.hex === '#FFFFFF' ? 'border: 2px solid #e0e0e0;' : ''}" 
                     onclick="selectPresetColor('${color.hex}', '${color.name}')"
                     title="${color.name}">
                </div>
            `).join('');
        }

        // Registrar Service Worker (apenas em produ√ß√£o)
        if ('serviceWorker' in navigator && !window.location.hostname.includes('claudeusercontent')) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('Service Worker registrado:', registration);
                        // Verificar atualiza√ß√µes periodicamente
                        setInterval(() => {
                            registration.update();
                        }, 60000); // Verifica a cada minuto
                    })
                    .catch(error => {
                        console.log('Service Worker n√£o dispon√≠vel neste ambiente');
                    });
            });
        } else {
            console.log('PWA funcionando em modo de desenvolvimento');
        }

        // Detectar instala√ß√£o PWA
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installPrompt').classList.add('show');
        });

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('App instalado');
                    }
                    deferredPrompt = null;
                    document.getElementById('installPrompt').classList.remove('show');
                });
            }
        }

        // Detectar status online/offline
        window.addEventListener('online', () => {
            document.getElementById('offlineIndicator').classList.remove('show');
        });

        window.addEventListener('offline', () => {
            document.getElementById('offlineIndicator').classList.add('show');
        });

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            updateColorPreview();
            loadPolishes();
            updateStats();
            initColorPicker();
        });

        // Mudan√ßa de abas
        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            if (tabName === 'collection') {
                loadPolishes();
            } else if (tabName === 'home') {
                updateStats();
                loadRecentPolishes();
            }
        }

        // Atualizar preview de cor
        function updateColorPreview() {
            const color = document.getElementById('colorPicker').value;
            document.getElementById('colorPreview').style.background = color;
            selectedColor = color;
        }

        // Preview de imagem
        document.getElementById('polishImage').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('polishImagePreview').innerHTML = 
                        `<img src="${e.target.result}" style="max-width: 100%; max-height: 150px; border-radius: 10px;">`;
                };
                reader.readAsDataURL(file);
            }
        });

        // Adicionar esmalte
        document.getElementById('polishForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const imageInput = document.getElementById('polishImage');
            const imageFile = imageInput.files[0];
            
            const processPolish = (imageData) => {
                const polish = {
                    id: Date.now(),
                    name: document.getElementById('name').value,
                    brand: document.getElementById('brand').value,
                    color: document.getElementById('colorPicker').value,
                    colorName: document.getElementById('colorName').value,
                    category: document.getElementById('category').value,
                    validity: document.getElementById('validity').value,
                    notes: document.getElementById('notes').value,
                    image: imageData,
                    createdAt: new Date().toISOString()
                };
                
                polishes.push(polish);
                localStorage.setItem('polishes', JSON.stringify(polishes));
                
                // Limpar formul√°rio
                document.getElementById('polishForm').reset();
                document.getElementById('polishImagePreview').innerHTML = 
                    '<span style="font-size: 32px;">üì∏</span><p style="margin-top: 10px;">Clique para adicionar foto</p>';
                updateColorPreview();
                
                // Feedback visual
                showNotification('Esmalte adicionado com sucesso! üíÖ');
                
                // Vibra√ß√£o de feedback (se suportado)
                if (navigator.vibrate) {
                    navigator.vibrate(50);
                }
                
                // Mudar para aba de cole√ß√£o
                switchTab('collection');
                document.querySelectorAll('.tab')[2].click();
            };
            
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = (e) => processPolish(e.target.result);
                reader.readAsDataURL(imageFile);
            } else {
                processPolish(null);
            }
        });

        // Carregar esmaltes
        function loadPolishes() {
            const grid = document.getElementById('polishGrid');
            const filtered = filterPolishesByColor(currentFilter);
            
            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1/-1;">
                        <div class="empty-state-icon">üé®</div>
                        <p>${currentFilter === 'all' ? 'Sua cole√ß√£o est√° vazia' : 'Nenhum esmalte desta cor'}</p>
                        <p style="font-size: 12px; margin-top: 10px;">
                            ${currentFilter === 'all' ? 'Adicione esmaltes na aba "Adicionar"' : 'Tente outra cor ou adicione novos esmaltes'}
                        </p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = filtered.map(polish => `
                <div class="polish-card" onclick="showPolishDetails(${polish.id})">
                    ${polish.image ? 
                        `<img src="${polish.image}" class="polish-card-image">` : 
                        `<div class="polish-card-image" style="display: flex; align-items: center; justify-content: center; font-size: 48px;">üíÖ</div>`
                    }
                    <div class="polish-card-body">
                        <div class="polish-name">${polish.name}</div>
                        <div class="polish-brand">${polish.brand}</div>
                        <div style="display: flex; align-items: center;">
                            <span class="polish-color" style="background: ${polish.color}"></span>
                            <span style="font-size: 12px; color: #888;">${polish.colorName || ''}</span>
                        </div>
                        ${polish.validity ? `
                            <div class="polish-validity">
                                üìÖ ${formatDate(polish.validity)}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }

        // Carregar esmaltes recentes
        function loadRecentPolishes() {
            const container = document.getElementById('recentPolishes');
            const recent = polishes.slice(-4).reverse();
            
            if (recent.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="grid-column: 1/-1;">
                        <div class="empty-state-icon">üíÖ</div>
                        <p>Nenhum esmalte adicionado ainda</p>
                        <p style="font-size: 12px; margin-top: 10px;">Comece adicionando seu primeiro esmalte!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = recent.map(polish => `
                <div class="polish-card" onclick="showPolishDetails(${polish.id})">
                    ${polish.image ? 
                        `<img src="${polish.image}" class="polish-card-image">` : 
                        `<div class="polish-card-image" style="display: flex; align-items: center; justify-content: center; font-size: 48px;">üíÖ</div>`
                    }
                    <div class="polish-card-body">
                        <div class="polish-name">${polish.name}</div>
                        <div class="polish-brand">${polish.brand}</div>
                        <span class="polish-color" style="background: ${polish.color}"></span>
                    </div>
                </div>
            `).join('');
        }

        // Filtrar por cor
        function filterByColor(color) {
            currentFilter = color;
            
            document.querySelectorAll('.color-filter').forEach(filter => {
                filter.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadPolishes();
        }

        function filterPolishesByColor(color) {
            if (color === 'all') return polishes;
            
            return polishes.filter(polish => {
                const polishHue = hexToHue(polish.color);
                const filterHue = hexToHue(color);
                const hueDiff = Math.abs(polishHue - filterHue);
                return hueDiff < 30 || hueDiff > 330;
            });
        }

        function hexToHue(hex) {
            const r = parseInt(hex.slice(1, 3), 16) / 255;
            const g = parseInt(hex.slice(3, 5), 16) / 255;
            const b = parseInt(hex.slice(5, 7), 16) / 255;
            
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            const diff = max - min;
            
            if (diff === 0) return 0;
            
            let hue;
            if (max === r) {
                hue = ((g - b) / diff) % 6;
            } else if (max === g) {
                hue = (b - r) / diff + 2;
            } else {
                hue = (r - g) / diff + 4;
            }
            
            return Math.round(hue * 60);
        }

        // Buscar esmaltes
        function filterPolishes() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filtered = polishes.filter(polish => 
                polish.name.toLowerCase().includes(searchTerm) ||
                polish.brand.toLowerCase().includes(searchTerm) ||
                (polish.colorName && polish.colorName.toLowerCase().includes(searchTerm))
            );
            
            const grid = document.getElementById('polishGrid');
            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1/-1;">
                        <div class="empty-state-icon">üîç</div>
                        <p>Nenhum esmalte encontrado</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = filtered.map(polish => `
                <div class="polish-card" onclick="showPolishDetails(${polish.id})">
                    ${polish.image ? 
                        `<img src="${polish.image}" class="polish-card-image">` : 
                        `<div class="polish-card-image" style="display: flex; align-items: center; justify-content: center; font-size: 48px;">üíÖ</div>`
                    }
                    <div class="polish-card-body">
                        <div class="polish-name">${polish.name}</div>
                        <div class="polish-brand">${polish.brand}</div>
                        <span class="polish-color" style="background: ${polish.color}"></span>
                    </div>
                </div>
            `).join('');
        }

        // Mostrar detalhes do esmalte
        function showPolishDetails(id) {
            currentPolishId = id;
            const polish = polishes.find(p => p.id === id);
            const polishNailArts = nailArts[id] || [];
            
            document.getElementById('modalTitle').textContent = polish.name;
            document.getElementById('modalBody').innerHTML = `
                ${polish.image ? `<img src="${polish.image}" style="width: 100%; border-radius: 10px; margin-bottom: 15px;">` : ''}
                
                <div style="margin-bottom: 10px;">
                    <strong>Marca:</strong> ${polish.brand}
                </div>
                
                <div style="margin-bottom: 10px; display: flex; align-items: center;">
                    <strong>Cor:</strong>
                    <span class="polish-color" style="margin-left: 10px; background: ${polish.color}"></span>
                    ${polish.colorName ? `<span style="margin-left: 10px;">${polish.colorName}</span>` : ''}
                </div>
                
                ${polish.category ? `
                    <div style="margin-bottom: 10px;">
                        <strong>Categoria:</strong> ${polish.category}
                    </div>
                ` : ''}
                
                ${polish.validity ? `
                    <div style="margin-bottom: 10px;">
                        <strong>Validade:</strong> ${formatDate(polish.validity)}
                        ${isExpiringSoon(polish.validity) ? '<span style="color: #ff6b6b; margin-left: 10px;">‚ö†Ô∏è Vencendo em breve</span>' : ''}
                    </div>
                ` : ''}
                
                ${polish.notes ? `
                    <div style="margin-bottom: 10px;">
                        <strong>Observa√ß√µes:</strong><br>
                        <span style="color: #666;">${polish.notes}</span>
                    </div>
                ` : ''}
                
                <div class="nail-art-section">
                    <h3 style="margin-bottom: 10px;">üíÖ Nail Arts com este esmalte</h3>
                    <div class="nail-art-grid" id="nailArtGrid">
                        ${polishNailArts.map((art, index) => `
                            <img src="${art}" class="nail-art-thumb" onclick="viewNailArt('${art}')" style="cursor: pointer;">
                        `).join('')}
                        <div class="nail-art-thumb" style="display: flex; align-items: center; justify-content: center; border: 2px dashed #667eea; cursor: pointer;" onclick="document.getElementById('nailArtInput').click()">
                            <span style="font-size: 24px;">‚ûï</span>
                        </div>
                    </div>
                    <input type="file" id="nailArtInput" accept="image/*" capture="environment" style="display: none;" onchange="addNailArt(event)">
                </div>
                
                <button class="btn btn-danger" onclick="deletePolish(${id})">üóëÔ∏è Excluir Esmalte</button>
            `;
            
            document.getElementById('detailModal').classList.add('active');
        }

        // Adicionar nail art
        function addNailArt(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                if (!nailArts[currentPolishId]) {
                    nailArts[currentPolishId] = [];
                }
                nailArts[currentPolishId].push(e.target.result);
                localStorage.setItem('nailArts', JSON.stringify(nailArts));
                
                showNotification('Nail art adicionada! üíÖ');
                if (navigator.vibrate) navigator.vibrate(50);
                showPolishDetails(currentPolishId);
                updateStats();
            };
            reader.readAsDataURL(file);
        }

        // Visualizar nail art
        function viewNailArt(imageSrc) {
            window.open(imageSrc, '_blank');
        }

        // Excluir esmalte
        function deletePolish(id) {
            if (confirm('Tem certeza que deseja excluir este esmalte?')) {
                polishes = polishes.filter(p => p.id !== id);
                localStorage.setItem('polishes', JSON.stringify(polishes));
                
                // Excluir nail arts associadas
                delete nailArts[id];
                localStorage.setItem('nailArts', JSON.stringify(nailArts));
                
                closeModal();
                loadPolishes();
                updateStats();
                showNotification('Esmalte exclu√≠do');
                if (navigator.vibrate) navigator.vibrate([50, 50, 50]);
            }
        }

        // Fechar modal
        function closeModal() {
            document.getElementById('detailModal').classList.remove('active');
        }

        // Atualizar estat√≠sticas
        function updateStats() {
            document.getElementById('totalPolishes').textContent = polishes.length;
            
            const brands = new Set(polishes.map(p => p.brand));
            document.getElementById('totalBrands').textContent = brands.size;
            
            const expiring = polishes.filter(p => p.validity && isExpiringSoon(p.validity));
            document.getElementById('expiringSoon').textContent = expiring.length;
            
            const totalNailArts = Object.values(nailArts).reduce((sum, arts) => sum + arts.length, 0);
            document.getElementById('totalNailArts').textContent = totalNailArts;
        }

        // Verificar se est√° vencendo em breve (30 dias)
        function isExpiringSoon(dateString) {
            const date = new Date(dateString);
            const today = new Date();
            const diffTime = date - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays <= 30 && diffDays >= 0;
        }

        // Formatar data
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }

        // Mostrar notifica√ß√£o
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 2000;
                animation: slideUp 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Adicionar anima√ß√£o fadeOut
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeOut {
                to { opacity: 0; transform: translateX(-50%) translateY(20px); }
            }
        `;
        document.head.appendChild(style);
        
        // Converter RGB para Hex
        function rgbToHex(r, g, b) {
            return '#' + [r, g, b].map(x => {
                const hex = x.toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            }).join('');
        }
        
        // Sugerir combina√ß√µes de cores
        function suggestCombinations() {
            const hsl = hexToHSL(selectedColor);
            
            // Diferentes tipos de combina√ß√µes
            const combinations = {
                monocromatica: {
                    name: 'Monocrom√°tica',
                    description: 'Varia√ß√µes da mesma cor',
                    colors: [
                        { h: hsl.h, s: Math.max(hsl.s - 30, 0), l: Math.min(hsl.l + 30, 100), name: 'Mais Clara' },
                        { h: hsl.h, s: hsl.s, l: hsl.l, name: 'Cor Base' },
                        { h: hsl.h, s: Math.min(hsl.s + 20, 100), l: Math.max(hsl.l - 20, 0), name: 'Mais Intensa' },
                        { h: hsl.h, s: Math.min(hsl.s + 30, 100), l: Math.max(hsl.l - 30, 0), name: 'Mais Escura' }
                    ]
                },
                complementar: {
                    name: 'Complementar',
                    description: 'Cores opostas no c√≠rculo crom√°tico',
                    colors: [
                        { h: hsl.h, s: hsl.s, l: hsl.l, name: 'Cor Base' },
                        { h: (hsl.h + 180) % 360, s: hsl.s, l: hsl.l, name: 'Complementar' },
                        { h: hsl.h, s: Math.max(hsl.s - 20, 0), l: Math.min(hsl.l + 20, 100), name: 'Base Clara' },
                        { h: (hsl.h + 180) % 360, s: Math.max(hsl.s - 20, 0), l: Math.min(hsl.l + 20, 100), name: 'Complementar Clara' }
                    ]
                },
                triadica: {
                    name: 'Tri√°dica',
                    description: 'Tr√™s cores equilibradas',
                    colors: [
                        { h: hsl.h, s: hsl.s, l: hsl.l, name: 'Cor Base' },
                        { h: (hsl.h + 120) % 360, s: hsl.s, l: hsl.l, name: 'Tri√°dica 1' },
                        { h: (hsl.h + 240) % 360, s: hsl.s, l: hsl.l, name: 'Tri√°dica 2' },
                        { h: hsl.h, s: Math.max(hsl.s - 30, 0), l: Math.min(hsl.l + 30, 100), name: 'Neutra' }
                    ]
                },
                analoga: {
                    name: 'An√°loga',
                    description: 'Cores vizinhas harmoniosas',
                    colors: [
                        { h: (hsl.h - 30 + 360) % 360, s: hsl.s, l: hsl.l, name: 'An√°loga -30¬∞' },
                        { h: hsl.h, s: hsl.s, l: hsl.l, name: 'Cor Base' },
                        { h: (hsl.h + 30) % 360, s: hsl.s, l: hsl.l, name: 'An√°loga +30¬∞' },
                        { h: (hsl.h + 60) % 360, s: hsl.s, l: hsl.l, name: 'An√°loga +60¬∞' }
                    ]
                },
                splitComplementar: {
                    name: 'Split-Complementar',
                    description: 'Combina√ß√£o sofisticada',
                    colors: [
                        { h: hsl.h, s: hsl.s, l: hsl.l, name: 'Cor Base' },
                        { h: (hsl.h + 150) % 360, s: hsl.s, l: hsl.l, name: 'Split 1' },
                        { h: (hsl.h + 210) % 360, s: hsl.s, l: hsl.l, name: 'Split 2' },
                        { h: hsl.h, s: Math.max(hsl.s - 40, 0), l: Math.min(hsl.l + 40, 100), name: 'Neutra' }
                    ]
                }
            };
            
            // Gerar HTML das sugest√µes
            const suggestionsHtml = `
                <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <div style="font-weight: 600; margin-bottom: 15px; color: #333;">‚ú® Sugest√µes de Combina√ß√µes</div>
                    ${Object.entries(combinations).map(([key, combo]) => `
                        <div style="margin-bottom: 15px; padding: 10px; background: white; border-radius: 8px; border-left: 4px solid #667eea;">
                            <div style="font-weight: 500; color: #333; margin-bottom: 5px;">${combo.name}</div>
                            <div style="font-size: 12px; color: #666; margin-bottom: 10px;">${combo.description}</div>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                                ${combo.colors.map(color => {
                                    const hex = hslToHex(color.h, color.s, color.l);
                                    return `
                                        <div style="text-align: center;">
                                            <div class="preset-color" 
                                                 style="background: ${hex}; width: 100%; height: 35px; margin-bottom: 5px; border-radius: 6px;" 
                                                 onclick="selectPresetColor('${hex}', '${color.name}')"
                                                 title="${color.name}">
                                            </div>
                                            <div style="font-size: 10px; color: #666;">${color.name}</div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    `).join('')}
                    <div style="text-align: center; margin-top: 15px;">
                        <button onclick="generateNailArtIdeas()" style="padding: 8px 15px; background: #ff69b4; color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer;">
                            üíÖ Ideias de Nail Art
                        </button>
                    </div>
                </div>
            `;
            
            // Inserir sugest√µes
            const customSection = document.querySelector('.custom-color-section');
            const existingSuggestions = document.getElementById('colorSuggestions');
            if (existingSuggestions) {
                existingSuggestions.remove();
            }
            
            const suggestionsDiv = document.createElement('div');
            suggestionsDiv.id = 'colorSuggestions';
            suggestionsDiv.innerHTML = suggestionsHtml;
            customSection.parentNode.insertBefore(suggestionsDiv, customSection.nextSibling);
        }
        
        // Gerar ideias de nail art baseadas na cor
        function generateNailArtIdeas() {
            const hsl = hexToHSL(selectedColor);
            const colorName = document.getElementById('colorName').value || getColorName(selectedColor);
            
            // Ideias baseadas na cor
            const ideas = [];
            
            // Baseado na tonalidade (hue)
            if (hsl.h >= 0 && hsl.h < 30 || hsl.h >= 330) { // Vermelho/Rosa
                ideas.push('üåπ Nail art rom√¢ntica com rosas', 'üíñ Cora√ß√µes delicados', 'üéÑ Tema natalino elegante');
            } else if (hsl.h >= 30 && hsl.h < 60) { // Laranja
                ideas.push('üçÇ Folhas de outono', 'üéÉ Halloween criativo', '‚òÄÔ∏è Por do sol');
            } else if (hsl.h >= 60 && hsl.h < 90) { // Amarelo
                ideas.push('üåª Girass√≥is', '‚ú® Brilho dourado', 'üåû Ver√£o tropical');
            } else if (hsl.h >= 90 && hsl.h < 150) { // Verde
                ideas.push('üåø Folhagem', 'üê∏ Tema natural', 'üçÄ Trevo da sorte');
            } else if (hsl.h >= 150 && hsl.h < 210) { // Azul/Ciano
                ideas.push('üåä Ondas do mar', '‚ùÑÔ∏è Cristais de gelo', 'ü¶ã Borboletas');
            } else if (hsl.h >= 210 && hsl.h < 270) { // Azul
                ideas.push('üåå Via l√°ctea', 'üí´ Estrelas', 'üéôÔ∏è Noite urbana');
            } else { // Roxo/Violeta
                ideas.push('üîÆ M√≠stico', 'üå∏ Flores delicadas', 'ü¶Ñ Unic√≥rnio');
            }
            
            // Baseado na satura√ß√£o
            if (hsl.s < 30) {
                ideas.push('ü§ç Nude sofisticado', '‚ú® Minimalista chic', 'üêÑ Geom√©trico suave');
            } else if (hsl.s > 70) {
                ideas.push('‚ö° Neon vibrante', 'üéà Festival de cores', 'üí• Pop art');
            }
            
            // Baseado na luminosidade
            if (hsl.l < 30) {
                ideas.push('üåô Noturno elegante', 'üï∑Ô∏è G√≥tico moderno', '‚¨õ Dramatic black');
            } else if (hsl.l > 80) {
                ideas.push('‚òÅÔ∏è Nuvens delicadas', 'üåº Primavera suave', 'ü•∞ Baby colors');
            }
            
            // Selecionar 6 ideias aleat√≥rias
            const selectedIdeas = ideas.sort(() => 0.5 - Math.random()).slice(0, 6);
            
            const ideasHtml = `
                <div style="margin-top: 15px; padding: 15px; background: linear-gradient(135deg, #ff69b4 0%, #667eea 100%); border-radius: 10px; color: white;">
                    <div style="font-weight: 600; margin-bottom: 10px; text-align: center;">üíÖ Ideias de Nail Art com ${colorName}</div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; font-size: 12px;">
                        ${selectedIdeas.map(idea => `
                            <div style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 6px; backdrop-filter: blur(10px);">
                                ${idea}
                            </div>
                        `).join('')}
                    </div>
                    <div style="margin-top: 10px; text-align: center; font-size: 11px; opacity: 0.9;">
                        üí° Clique em "Confirmar Cor" para usar nos seus esmaltes!
                    </div>
                </div>
            `;
            
            // Adicionar ideias
            const suggestionsContainer = document.getElementById('colorSuggestions');
            if (suggestionsContainer) {
                const existingIdeas = suggestionsContainer.querySelector('.nail-art-ideas');
                if (existingIdeas) {
                    existingIdeas.remove();
                }
                
                const ideasDiv = document.createElement('div');
                ideasDiv.className = 'nail-art-ideas';
                ideasDiv.innerHTML = ideasHtml;
                suggestionsContainer.appendChild(ideasDiv);
            }
        }
    </script>
</body>
</html>